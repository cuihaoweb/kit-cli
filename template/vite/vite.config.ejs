import { defineConfig } from 'vite';
import { VitePluginNode } from 'vite-plugin-node';
import path from 'path';
import {fileURLToPath} from 'url';
import {dirname, resolve} from 'path';

const CWD_PATH = process.cwd();
const resolveApp = (...paths) => path.resolve(CWD_PATH, ...paths);

export default defineConfig({
    build: {
        lib: {
            entry: resolveApp('./index.js'),
            formats: ['es'],
            name: 'kit-cli',
            fileName: '[name].js'
        }
    },
    plugins: [
        ...VitePluginNode({
            appPath: resolveApp('./index.js'),
        })
    ]
});
